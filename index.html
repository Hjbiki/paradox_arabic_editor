<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุญุฑุฑ ูุตูุต ุจุงุฑุงุฏููุณ</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-language"></i> ูุญุฑุฑ ูุตูุต ุจุงุฑุงุฏููุณ</h1>
                <div class="header-controls">
                    <input type="file" id="fileInput" accept=".yml,.yaml" style="display: none;">
                    <input type="file" id="englishFileInput" accept=".yml,.yaml" style="display: none;">
                    
                    <div class="control-section">
                        <button id="apiSettingsBtn" class="btn btn-secondary">
                            <i class="fas fa-cog"></i> ุฅุนุฏุงุฏุงุช API
                        </button>
                        <button id="fileButton" class="btn btn-primary">
                            <i class="fas fa-folder-open"></i> ูุชุญ ููู
                        </button>
                        <button id="loadEnglishBtn" class="btn btn-info" style="margin-left: 10px;">
                            <i class="fas fa-upload"></i> ุฑูุน ูุฑุฌุน ุฅูุฌููุฒู
                        </button>
                    </div>
                    <button class="btn btn-success save-btn unsaved" id="saveFileBtn" onclick="saveAllChanges()">
                        <i class="fas fa-save"></i> ุญูุธ ุงูููู
                    </button>
                </div>
            </div>
        </header>

        <!-- Toolbar -->
        <div class="toolbar">
            <div class="toolbar-left">
                <div class="control-group">
                    <label for="fontSize">ุญุฌู ุงูุฎุท:</label>
                    <select id="fontSize" onchange="changeFontSize()">
                        <option value="10">10 (ุตุบูุฑ ุฌุฏุงู)</option>
                        <option value="11">11 (ุตุบูุฑ)</option>
                        <option value="12">12 (ุนุงุฏู ุตุบูุฑ)</option>
                        <option value="14" selected>14 (ุงูุชุฑุงุถู)</option>
                        <option value="16">16 (ูุชูุณุท)</option>
                        <option value="18">18 (ูุจูุฑ)</option>
                        <option value="20">20 (ูุจูุฑ ุฌุฏุงู)</option>
                        <option value="22">22 (ุถุฎู)</option>
                        <option value="24">24 (ุถุฎู ุฌุฏุงู)</option>
                        <option value="28">28 (ุนููุงู)</option>
                        <option value="32">32 (ุนููุงู ุฌุฏุงู)</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="textAlign">ูุญุงุฐุงุฉ ุงููุต:</label>
                    <select id="textAlign" onchange="changeTextAlignment()">
                        <option value="right" selected>ูููู</option>
                        <option value="center">ูุณุท</option>
                        <option value="left">ูุณุงุฑ</option>
                    </select>
                </div>
                <div class="control-group translation-controls">
                    <label for="translationService">ุฎุฏูุฉ ุงูุชุฑุฌูุฉ:</label>
                    <select id="translationService">
                        <option value="mymemory">MyMemory (ูุฌุงูู - ุจุฏูู API)</option>
                        <option value="claude">Claude (Anthropic)</option>
                        <option value="chatgpt">ChatGPT (OpenAI)</option>
                        <option value="gemini">Gemini (Google)</option>
                        <option value="deepl">DeepL</option>
                        <option value="google">Google Translate</option>
                    </select>
                    <button class="btn btn-info translate-btn" onclick="translateCurrentText()" title="ุชุฑุฌูุฉ ุงููุต ุงููุฑุฌุนู">
                        <i class="fas fa-language"></i> ุชุฑุฌู
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Left Panel - Translation List -->
            <div class="left-panel">
                <div class="panel-header">
                    <h3><i class="fas fa-list"></i> ููุงุชูุญ ุงูุชุฑุฌูุฉ</h3>
                    <div class="stats">
                        <span id="statsText">ุฅุฌูุงูู ุงูุชุฑุฌูุงุช: 0</span>
                    </div>
                </div>
                <!-- Search Box -->
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="ุจุญุซ ูู ุงูุชุฑุฌูุงุช..." oninput="filterTranslations()">
                </div>
                <div class="translation-list" id="translationList">
                    <!-- Translation items will be populated here -->
                </div>
            </div>

            <!-- Right Panel - Translation Editor -->
            <div class="right-panel">
                <div class="panel-header">
                    <h3><i class="fas fa-edit"></i> ูุญุฑุฑ ุงูุชุฑุฌูุฉ</h3>
                    <div class="navigation">
                        <button class="btn btn-secondary" onclick="previousTranslation()">
                            <i class="fas fa-chevron-right"></i> ุงูุณุงุจู
                        </button>
                        <button class="btn btn-secondary" onclick="nextTranslation()">
                            ุงูุชุงูู <i class="fas fa-chevron-left"></i>
                        </button>
                    </div>
                </div>

                <div class="editor-content">
                    <!-- Original Text -->
                    <div class="field-group">
                        <label>ุงููุต ุงููุฑุฌุนู (ุฅูุฌููุฒู):</label>
                        <div class="text-display-container">
                            <div class="text-display original-text" id="originalText" readonly></div>
                            <button class="copy-icon" onclick="copyToClipboard('originalText')" title="ูุณุฎ ุงููุต ุงููุฑุฌุนู">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Translation Text -->
                    <div class="field-group">
                        <label>ุงูุชุฑุฌูุฉ (ูุงุจู ููุชุนุฏูู):</label>
                        <div class="text-display-container">
                            <textarea id="translationText" class="translation-input" 
                                      placeholder="ุงูุชุจ ุงูุชุฑุฌูุฉ ููุง..."></textarea>
                            <button class="copy-icon" onclick="copyToClipboard('translationText')" title="ูุณุฎ ุงูุชุฑุฌูุฉ">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                        <button class="btn btn-warning" onclick="undoChanges()">
                            <i class="fas fa-undo"></i> ุฅุนุงุฏุฉ ุชุนููู
                        </button>
                        <button class="btn btn-info" onclick="toggleBlocksMode()" title="ุชูุนูู/ุฅููุงู ูุถุน ุงูุจูููุงุช">
                            <i class="fas fa-cubes"></i> ูุถุน ุงูุจูููุงุช
                        </button>
                        <button class="btn btn-secondary" onclick="insertNewline()" title="ุฅุถุงูุฉ ุณุทุฑ ุฌุฏูุฏ \\n ูู ููุงู ุงููุชุงุจุฉ (ุฃู Shift+Enter)">
                            <i class="fas fa-level-down-alt"></i> + ุณุทุฑ
                        </button>
                        <button class="btn btn-outline-danger btn-sm" onclick="cleanupDuplicateBlocksEditors()" title="ุชูุธูู ุงูุนูุงุตุฑ ุงูููุฑุฑุฉ (ููุทูุงุฑุฆ ููุท)" style="font-size: 0.8em; padding: 0.25rem 0.5rem;">
                            <i class="fas fa-broom"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <span id="statusText">ูู ูุชู ุชุญููู ููู</span>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <span>ุชู ุตูุนู ูู ุนูุงุฏ ุนุณูุฑ</span>
        </footer>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-cog"></i> ุฅุนุฏุงุฏุงุช ุฎุฏูุงุช ุงูุชุฑุฌูุฉ</h3>
                <button class="close-modal" onclick="closeSettings()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-group" style="background: rgba(40, 167, 69, 0.1); border-color: rgba(40, 167, 69, 0.3);">
                    <h4><i class="fas fa-gift"></i> MyMemory (ูุฌุงูู)</h4>
                    <p style="color: #28a745; margin: 0.5rem 0;">
                        โ <strong>ูุนูู ุจุฏูู ููุชุงุญ API!</strong><br>
                        ๐ ูุชุงุญ ุนูู GitHub Pages ุจุฏูู ูุดุงูู<br>
                        ๐ฏ ููุงุณุจ ููุงุณุชุฎุฏุงู ุงููููู
                    </p>
                    <small style="color: #6c757d;">ูุง ุชุญุชุงุฌ ูุฅุฏุฎุงู ุฃู ููุชุงุญ - ููุท ุงุฎุชุฑ "MyMemory" ูุงุถุบุท ุชุฑุฌู</small>
                </div>
                
                <div class="settings-group">
                    <h4><i class="fas fa-robot"></i> Claude (Anthropic)</h4>
                    <input type="password" id="claudeApiKey" placeholder="ุฃุฏุฎู ููุชุงุญ Claude API" class="api-input">
                    <small>ุงุญุตู ุนูู ุงูููุชุงุญ ูู: <a href="https://console.anthropic.com/" target="_blank">console.anthropic.com</a></small>
                    <div style="background: #fff3cd; padding: 0.5rem; border-radius: 4px; margin-top: 0.5rem;">
                        <small style="color: #856404;">
                            ๐ก <strong>ุญู CORS:</strong> ูุฒูู <a href="https://chrome.google.com/webstore/search/cors%20unblock" target="_blank">CORS extension</a> ูููุชุตูุญ
                        </small>
                    </div>
                </div>
                
                <div class="settings-group">
                    <h4><i class="fas fa-brain"></i> ChatGPT (OpenAI)</h4>
                    <input type="password" id="openaiApiKey" placeholder="ุฃุฏุฎู ููุชุงุญ OpenAI API" class="api-input">
                    <small>ุงุญุตู ุนูู ุงูููุชุงุญ ูู: <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com</a></small>
                </div>
                
                <div class="settings-group">
                    <h4><i class="fab fa-google"></i> Gemini (Google)</h4>
                    <input type="password" id="geminiApiKey" placeholder="ุฃุฏุฎู ููุชุงุญ Gemini API" class="api-input">
                    <small>ุงุญุตู ุนูู ุงูููุชุงุญ ูู: <a href="https://makersuite.google.com/app/apikey" target="_blank">makersuite.google.com</a></small>
                </div>
                
                <div class="settings-group">
                    <h4><i class="fas fa-language"></i> DeepL</h4>
                    <input type="password" id="deeplApiKey" placeholder="ุฃุฏุฎู ููุชุงุญ DeepL API" class="api-input">
                    <small>ุงุญุตู ุนูู ุงูููุชุงุญ ูู: <a href="https://www.deepl.com/pro-api" target="_blank">deepl.com/pro-api</a></small>
                </div>
                
                <div class="settings-group">
                    <h4><i class="fas fa-globe"></i> Google Translate</h4>
                    <input type="password" id="googleApiKey" placeholder="ุฃุฏุฎู ููุชุงุญ Google Cloud API" class="api-input">
                    <small>ุงุญุตู ุนูู ุงูููุชุงุญ ูู: <a href="https://console.cloud.google.com/" target="_blank">console.cloud.google.com</a></small>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-success" onclick="saveApiSettings()">
                    <i class="fas fa-save"></i> ุญูุธ ุงูุฅุนุฏุงุฏุงุช
                </button>
                <button class="btn btn-secondary" onclick="closeSettings()">
                    <i class="fas fa-times"></i> ุฅูุบุงุก
                </button>
            </div>
        </div>
    </div>

    <!-- File Input (Hidden) -->
    <input type="file" id="fileInput" accept=".yml,.yaml" style="display: none;" onchange="handleFileSelect(event)">

    <!-- Notifications -->
    <div id="notification" class="notification"></div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>ุฌุงุฑู ุงูุชุญููู...</p>
        </div>
    </div>

    <!-- ===== ุชุญููู ุงููููุงุช JavaScript ุจุงูุชุฑุชูุจ ุงูุตุญูุญ ===== -->
    
    <!-- 1. ุงููุชุบูุฑุงุช ุงูุนุงูุฉ ุฃููุงู -->
    <script src="js/core/globals.js"></script>
    
    <!-- 2. ุงูุฏูุงู ุงููุณุงุนุฏุฉ ูุงูุฃูุงู -->
    <script src="js/utils/helpers.js"></script>
    <script src="js/utils/storage.js"></script>
    <script src="js/utils/safety.js"></script>
    
    <!-- 3. ูุนุงูุฌุฉ ุงููููุงุช -->
    <script src="js/file-handling/yaml-loader.js"></script>
    <script src="js/file-handling/file-operations.js"></script>
    
    <!-- 4. ุฎุฏูุงุช ุงูุชุฑุฌูุฉ -->
    <script src="js/translation/services.js"></script>
    <script src="js/translation/translation-ops.js"></script>
    
    <!-- 5. ูุงุฌูุฉ ุงููุณุชุฎุฏู -->
    <script src="js/ui/blocks-mode.js"></script>
    <script src="js/ui/controls.js"></script>
    <script src="js/ui/notifications.js"></script>
    
    <!-- 6. ุฏูุงู ุงูุงุฎุชุจุงุฑ -->
    <script src="js/tests/test-functions.js"></script>
    
    <!-- 7. ุงูุชููุฆุฉ ุงูุฑุฆูุณูุฉ ูู ุงูููุงูุฉ -->
    <script src="js/core/main.js"></script>
    
</body>
</html> 
